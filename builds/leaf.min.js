var leaf;!function(a){"use strict";a.isString=function(a){return"string"==typeof a||a instanceof String},a.isNumber=function(a){return"number"==typeof a},a.isBoolean=function(a){return"boolean"==typeof a},a.isArray=function(a){return a.constructor===Array},a.isFunction=function(a){return"function"==typeof a},a.isObject=function(a){return"object"==typeof a},a.isDate=function(a){return"[object Date]"===Object.prototype.toString.call(a)},a.isDefined=function(a){return"undefined"!=typeof a},a.isUndefined=function(a){return"undefined"==typeof a},a.concat=function(){return Array.prototype.slice.call(arguments).join("")},a.queryString=function(a){return decodeURIComponent((new RegExp("[?|&]"+a+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null};var b;!function(b){function c(b,c,d){var e=new XMLHttpRequest;e.open(b.method,b.url,!0,b.username,b.password),e.onreadystatechange=function(){4==e.readyState?200==e.status&&a.isFunction(c)&&c(e.responseText):a.isFunction(d)&&d(e.statusText)},e.send(b.data)}function d(b){var c={method:"GET",url:b};return{then:function(b,d){a.http.request(c,b,d)}}}function e(b){var c={method:"DELETE",url:b};return{then:function(b,d){a.http.request(c,b,d)}}}function f(b){var c={method:"HEAD",url:b};return{then:function(b,d){a.http.request(c,b,d)}}}function g(b){var c={method:"JSONP",url:b};return{then:function(b,d){a.http.request(c,b,d)}}}function h(b,c){var d={method:"POST",url:b,data:c};return{then:function(b,c){a.http.request(d,b,c)}}}function i(b,c){var d={method:"PATCH",url:b,data:c};return{then:function(b,c){a.http.request(d,b,c)}}}function j(b,c,d,e){var f=document.querySelector(c);a.http.get(b).then(function(b){f.innerHTML=b,a.isFunction(d)&&d()},function(){a.isFunction(e)&&e()})}b.request=c,b.get=d,b.del=e,b.head=f,b.jsonp=g,b.post=h,b.patch=i,b.include=j}(b=a.http||(a.http={}));var c=function(){function b(a){this.loadData(a||[])}return b.prototype.get=function(a){return this.items[a]},b.prototype.add=function(a){this.items.push(a)},b.prototype.remove=function(a){delete this.items[a]},b.prototype.each=function(a){for(var b in this.items)a(this.get(b),b)},b.prototype.count=function(){return this.items.length},b.prototype.sort=function(a){this.items.sort(a)},b.prototype.reset=function(){this.items=[]},b.prototype.toJSON=function(){return this.items.map(function(a){return a.toJSON()})},b.prototype.loadData=function(b,c){c||(this.items=[]);for(var d in b)this.add(new a.Model(b[d]))},b.prototype.loadJSON=function(b,c,d,e){var f=this;a.http.get(b).then(function(b){f.loadData(JSON.parse(b)),a.isFunction(c)&&c(f)},function(){a.isFunction(d)&&d(f)})},b.prototype.template=function(a){var b="";return this.each(function(c){b+=c.template(a)}),b},b}();a.List=c;var d=function(){function a(a){this.items=a||{},this._cbs={}}return a.prototype.get=function(a){return this.items[a]},a.prototype.set=function(a,b){this.items[a]=b,a in this._cbs&&this._cbs[a](b)},a.prototype.remove=function(a){delete this.items[a]},a.prototype.contains=function(a){return a in this._items},a.prototype.on=function(a,b){this._cbs[a]=b},a.prototype.un=function(a){delete this._cbs[a]},a.prototype.each=function(a){for(var b in this.items)a(b,this.get(b))},a.prototype.toJSON=function(){return JSON.stringify(this.items)},a.prototype.template=function(a){return this.each(function(b,c){a=a.replace("{{"+b+"}}",c||"")}),a},a}();a.Model=d;var e=function(){function b(a){this.options=a}return b.prototype.render=function(b,c){var d=this;this.options.selector=b,this.options.props=c,a.isFunction(d.options.draw)&&this.each(function(a){a.innerHTML=d.options.draw(a)})},b.prototype.each=function(a){for(var b=document.querySelectorAll(this.options.selector),c=0,d=b.length;d>c;c++)a(b[c])},b.prototype.props=function(){return this.options.props},b}();a.View=e;var f=function(){function a(a){this._routes=a||{}}return a.prototype.add=function(a,b){this._routes[a]=b},a.prototype.get=function(a){return this._routes[a]},a.prototype.remove=function(a){delete this._routes[a]},a.prototype.contains=function(a){return a in this._routes},a.prototype.invoke=function(a){var b=this;a=a||window.location.hash;for(var c in this._routes)a.toLowerCase().substring(0,c.length)===c.toLowerCase()&&b.get(c)()},a.prototype.listen=function(a){var b=this;window.addEventListener("hashchange",function(){b.invoke()}),this.invoke(a)},a.prototype.ignore=function(){var a=this;window.removeEventListener("hashchange",function(){a.invoke()})},a}();a.Router=f,a.JsonModelerControl=new a.View({draw:function(b){var c=b.innerHTML;return a.http.get(this.props.url,function(d){var e=new a.Model(JSON.parse(d));b.innerHTML=e.template(c)},function(){b.innerHTML=""}),""}}),a.JsonRepeaterControl=new a.View({draw:function(b){var c=new a.List,d=b.innerHTML;return c.loadJSON(this.props.url,function(a){b.innerHTML=a.template(d)},function(){b.innerHTML=""}),""}}),a.ListRepeaterControl=new a.View({draw:function(a){return this.props.data.template(a.innerHTML)}})}(leaf||(leaf={}));