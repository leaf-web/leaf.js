var leaf;!function(a){"use strict";a.isString=function(a){return"string"==typeof a||a instanceof String},a.isNumber=function(a){return"number"==typeof a},a.isBoolean=function(a){return"boolean"==typeof a},a.isArray=function(a){return a.constructor===Array},a.isFunction=function(a){return"function"==typeof a},a.isObject=function(a){return"object"==typeof a},a.isDate=function(a){return"[object Date]"===Object.prototype.toString.call(a)},a.isDefined=function(a){return"undefined"!=typeof a},a.isUndefined=function(a){return"undefined"==typeof a},a.isNull=function(a){return null===a},a.concat=function(){return Array.prototype.slice.call(arguments).join("")},a.merge=function(a,b){for(var c in b)"undefined"==typeof a[c]&&(a[c]=b[c]);return a};var b;!function(b){function c(b,c,d){var e=new XMLHttpRequest;if(e.open(b.method,b.url,!0,b.username,b.password),a.isDefined(b.headers))for(var f in b.headers)e.setRequestHeader(f,b.headers[i]);e.onreadystatechange=function(){4==e.readyState&&(200==e.status?a.isFunction(c)&&c(e.responseText):a.isFunction(d)&&d(e.statusText))},e.send(b.data||null)}function d(b,c){var d=a.merge(c||{},{method:"GET",url:b});return{then:function(b,c){a.http.request(d,b,c)}}}function e(b,c){var d=a.merge(c||{},{method:"DELETE",url:b});return{then:function(b,c){a.http.request(d,b,c)}}}function f(b,c){var d=a.merge(c||{},{method:"HEAD",url:b});return{then:function(b,c){a.http.request(d,b,c)}}}function g(b,c){var d=a.merge(c||{},{method:"JSONP",url:b});return{then:function(b,c){a.http.request(d,b,c)}}}function h(b,c,d){var e=a.merge(d||{},{method:"POST",url:b,data:c});return{then:function(b,c){a.http.request(e,b,c)}}}function j(b,c,d){var e=a.merge(d||{},{method:"PATCH",url:b,data:c});return{then:function(b,c){a.http.request(e,b,c)}}}function k(b,c,d,e){var f=document.querySelector(c);a.http.get(b).then(function(b){f.innerHTML=b,a.isFunction(d)&&d(b)},function(b){a.isFunction(e)&&e(b)})}b.request=c,b.get=d,b.del=e,b.head=f,b.jsonp=g,b.post=h,b.patch=j,b.include=k}(b=a.http||(a.http={}));!function(a){function b(a){return decodeURIComponent((new RegExp("[?|&]"+a+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}a.param=b}(b=a.request||(a.request={}));var c=function(){function b(b,c,d){this.items=[],a.isUndefined(b)||(a.isArray(b)&&this.merge(b),a.isString(b)&&this.fetch(b,c,d))}return b.prototype.get=function(a){return this.items[a]},b.prototype.add=function(a){this.items.push(a)},b.prototype.remove=function(a){this.items.splice(a,1)},b.prototype.clear=function(){this.items=[]},b.prototype.fetch=function(b,c,d){var e=this;a.http.get(b).then(function(b){e.merge(JSON.parse(b)),a.isFunction(c)&&c(e)},function(b){a.isFunction(d)&&d(b)})},b.prototype.merge=function(b){for(var c in b)this.add(new a.Model(b[c]))},b.prototype.each=function(a){for(var b in this.items)a(this.get(b),b)},b.prototype.count=function(a){return this.items.length},b.prototype.sort=function(a){this.items.sort(a)},b.prototype.filter=function(a){this.items=this.items.filter(a)},b.prototype.toJSON=function(){return this.items.map(function(a){return a.toJSON()})},b.prototype.template=function(a){var b="";return this.each(function(c){b+=c.template(a)}),b},b}();a.List=c;var d=function(){function a(a,b){this.items=a||{},this._cbs=b||{}}return a.prototype.get=function(a){return this.items[a]},a.prototype.set=function(a,b){this.items[a]=b,a in this._cbs&&this._cbs[a](b)},a.prototype.remove=function(a){delete this.items[a],a in this._cbs&&delete this._cbs[a]},a.prototype.clear=function(){this.items={},this._cbs={}},a.prototype.on=function(a,b){this._cbs[a]=b},a.prototype.un=function(a){delete this._cbs[a]},a.prototype.contains=function(a){return a in this.items},a.prototype.each=function(a){for(var b in this.items)a(b,this.get(b))},a.prototype.count=function(){return Object.keys(this.items).length},a.prototype.clone=function(){return new a(this.items,this._cbs)},a.prototype.toJSON=function(){return JSON.stringify(this.items)},a.prototype.template=function(a){return this.each(function(b,c){a=a.replace(new RegExp("{{"+b+"}}","g"),c||"")}),a},a}();a.Model=d;var e=function(){function b(a){this.options=a}return b.prototype.render=function(b,c){var d=this;this.options.selector=b,this.options.props=c,a.isFunction(d.options.draw)&&this.each(function(a){a.innerHTML=d.options.draw(a)})},b.prototype.props=function(){return this.options.props},b.prototype.each=function(a){for(var b=document.querySelectorAll(this.options.selector),c=0,d=b.length;d>c;c++)a(b[c])},b}();a.View=e;var f=function(){function a(a){this.routes=a||{}}return a.prototype.add=function(a,b){this.routes[a]=b},a.prototype.get=function(a){return this.routes[a]},a.prototype.remove=function(a){delete this.routes[a]},a.prototype.clear=function(){this.routes={}},a.prototype.contains=function(a){return a in this.routes},a.prototype.each=function(a){for(var b in this.routes)a(b,this.get(b))},a.prototype.listen=function(){var a=this;window.addEventListener("hashchange",function(){a.call(window.location.hash)})},a.prototype.ignore=function(){var a=this;window.removeEventListener("hashchange",function(){a.call()})},a.prototype.call=function(a){for(var b in this.routes){var c=a.match(new RegExp(b.replace(/:([^\/]+)/g,"([^/]*)"))),d={},e=b.match(/:([^\/]+)/g);if(c)return c.shift(),c.forEach(function(a,b){d[e[b].replace(":","")]=a}),void this.get(b)(d)}},a}();a.Router=f}(leaf||(leaf={}));