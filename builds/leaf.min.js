var leaf;!function(a){"use strict";a.isNumber=function(a){return"number"==typeof a},a.isBoolean=function(a){return"boolean"==typeof a},a.isArray=function(a){return a.constructor===Array},a.isFunction=function(a){return"function"==typeof a},a.isObject=function(a){return"object"==typeof a},a.isDate=function(a){return"[object Date]"===Object.prototype.toString.call(a)},a.isDefined=function(a){return"undefined"!=typeof a},a.isUndefined=function(a){return"undefined"==typeof a},a.concat=function(){return Array.prototype.slice.call(arguments).join("")};var b;!function(b){function c(b,c,d){var e=new XMLHttpRequest;e.open(b.method,b.url,!0,b.username,b.password),e.onreadystatechange=function(){4==e.readyState?200==e.status&&a.isFunction(c)&&c(e.responseText):a.isFunction(d)&&d(e.statusText)},e.send(b.data)}function d(b){var c={method:"GET",url:b};return{then:function(b,d){a.http.request(c,b,d)}}}function e(b){var c={method:"DELETE",url:b};return{then:function(b,d){a.http.request(c,b,d)}}}function f(b){var c={method:"HEAD",url:b};return{then:function(b,d){a.http.request(c,b,d)}}}function g(b){var c={method:"JSONP",url:b};return{then:function(b,d){a.http.request(c,b,d)}}}function h(b,c){var d={method:"POST",url:b,data:c};return{then:function(b,c){a.http.request(d,b,c)}}}function i(b,c){var d={method:"PATCH",url:b,data:c};return{then:function(b,c){a.http.request(d,b,c)}}}function j(b,c){var d=document.querySelector(c);a.http.get(b).then(function(b){d.innerHTML=b,a.isFunction(success)&&success()},function(){a.isFunction(failure)&&failure()})}b.request=c,b.get=d,b.del=e,b.head=f,b.jsonp=g,b.post=h,b.patch=i,b.include=j}(b=a.http||(a.http={}));var c=function(){function b(a){this.loadData(a||[])}return b.prototype.get=function(a){return this._items[a]},b.prototype.add=function(a){this._items.push(a)},b.prototype.remove=function(a){delete this._items[a]},b.prototype.each=function(a){for(var b in this._items)a(this.get(b),b)},b.prototype.count=function(){return this._items.length},b.prototype.sort=function(a){this._items.sort(a)},b.prototype.toJSON=function(){return this._items.map(function(a){return a.toJSON()})},b.prototype.loadData=function(b,c){c||(this._items=[]);for(var d in b)this.add(new a.Model(b[d]))},b.prototype.loadJSON=function(b,c,d,e){var f=this;a.http.get(b).then(function(b){f.loadData(JSON.parse(b)),a.isFunction(c)&&c(f)},function(){a.isFunction(d)&&d(f)})},b}();a.List=c;var d=function(){function a(a){this._items=a||{},this._cbs={}}return a.prototype.get=function(a){return this._items[a]},a.prototype.set=function(a,b){this._items[a]=b,a in this._cbs&&this._cbs[a](b)},a.prototype.remove=function(a){delete this._items[a]},a.prototype.contains=function(a){return a in this._items},a.prototype.on=function(a,b){this._cbs[a]=b},a.prototype.un=function(a){delete this._cbs[a]},a.prototype.each=function(a){for(var b in this._items)a(b,this.get(b))},a.prototype.toJSON=function(){return JSON.stringify(this._items)},a.prototype.template=function(a){return this.each(function(b,c){a=a.replace("{{"+b+"}}",c)}),a},a}();a.Model=d;var e=function(){function b(b){this.options=b,a.isFunction(b.init)&&this.each(function(a){b.init(a)})}return b.prototype.render=function(b){var c=this;c.options.props=b||{},a.isFunction(c.options.draw)&&this.each(function(a){a.innerHTML=c.options.draw(a)})},b.prototype.props=function(){return this.options.props},b.prototype.each=function(a){for(var b=document.querySelectorAll(this.options.selector),c=0,d=b.length;d>c;c++)a(b[c])},b}();a.View=e;var f=function(){function a(a){this._routes=a||{}}return a.prototype.add=function(a,b){this._routes[a]=b},a.prototype.get=function(a){return this._routes[a]},a.prototype.remove=function(a){delete this._routes[a]},a.prototype.contains=function(a){return a in this._routes},a.prototype.invoke=function(a){var b=this;a=a||window.location.hash;for(var c in this._routes)a.toLowerCase().substring(0,c.length)===c.toLowerCase()&&b.get(c)()},a.prototype.listen=function(a){var b=this;window.addEventListener("hashchange",function(){b.invoke()}),this.invoke(a)},a.prototype.ignore=function(){var a=this;window.removeEventListener("hashchange",function(){a.invoke()})},a}();a.Router=f,a.RepeatView=new a.View({selector:"[leaf-repeat]",draw:function(b){var c=b.innerHTML,d="",e=new a.List;e.loadJSON(b.getAttribute("leaf-repeat"),function(a){a.each(function(a){d+=a.template(c)}),b.innerHTML=d},function(a){b.innerHTML=""})}})}(leaf||(leaf={}));